<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ุบุฑูุฉ ุงูุชุฏุฑูุจ ุงูุฌูุงุนู - ููุตุฉ Zero Fake</title>
    <link rel="stylesheet" href="_main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet" />

</head>
<body class="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 font-cairo rtl-support">
    <!-- Background Pattern -->
    <div class="fixed inset-0 opacity-10">
        <div class="absolute inset-0 bg-gradient-to-r from-blue-600/20 to-purple-600/20"></div>
        <div class="absolute top-0 left-0 w-full h-full">
            <svg class="w-full h-full" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse">
                        <path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(59, 130, 246, 0.1)" stroke-width="0.5"/>
                    </pattern>
                </defs>
                <rect width="100%" height="100%" fill="url(#grid)"/>
            </svg>
        </div>
    </div>

    <!-- Header -->
    <header class="relative z-10 bg-white/10 backdrop-blur-lg border-b border-white/20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Room Info -->
                <div class="flex items-center gap-4">
                    <a href="dashboard.html" class="flex items-center gap-2 text-white hover:text-blue-200 transition-colors duration-200">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
                        </svg>
                        <span class="font-medium">ุงูุนูุฏุฉ</span>
                    </a>
                    <div class="h-6 w-px bg-white/20"></div>
                    <div class="flex items-center gap-2">
                        <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-sm">๐ฅ</span>
                        </div>
                        <div>
                            <h1 class="text-white font-semibold" id="roomTitle">ุบุฑูุฉ ุงูุชุฏุฑูุจ</h1>
                            <p class="text-blue-200 text-sm" id="roomCodeDisplay">ุฑูุฒ: ุชุญููู...</p>
                        </div>
                    </div>
                </div>

                <!-- Game Info -->
                <div class="flex items-center gap-4">
                    <div class="flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2">
                        <svg class="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                        </svg>
                        <span class="text-white font-medium" id="userPoints">0</span>
                    </div>
                    <div class="flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-lg px-3 py-2">
                        <span class="text-lg">๐ฅ</span>
                        <span class="text-white font-medium" id="currentStreak">0</span>
                    </div>
                    <!-- Timer removed for single-player mode -->
                </div>
            </div>
        </div>
    </header>

    <!-- Game Content -->
    <main class="relative z-10 flex-1 py-8">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Players Status Bar -->
            <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-6 border border-white/20">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-bold text-white">ุงูุชูุฏู</h2>
                    <!-- Question Progress Display -->
                    <div class="text-blue-200 text-sm">
                        ุณุคุงู <span id="currentQuestion">1</span> ูู <span id="totalQuestions">10</span>
                    </div>
                </div>
                <div id="playersList" class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4">
                    <!-- Players will be populated here -->
                </div>
            </div>

            <!-- Question Container -->
            <div id="questionContainer" class="bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20">
                <!-- Loading State -->
                <div id="loadingState" class="text-center py-12">
                    <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center animate-pulse">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-2">ุฌุงุฑู ุชุญููู ุงูุณุคุงู...</h3>
                    <p class="text-blue-200">ุงุณุชุนุฏ ููุจุฏุก!</p>
                </div>

                <!-- Answer Feedback Section -->
                <div id="answerFeedback" class="hidden mb-6 p-6 rounded-lg text-center">
                    <div id="feedbackText" class="text-lg font-semibold mb-2"></div>
                    <div id="explanationText" class="text-white/80 mb-3"></div>
                    <div class="text-blue-300 text-sm">ุงูุงูุชูุงู ุฅูู ุงูุณุคุงู ุงูุชุงูู...</div>
                </div>

                <!-- Question Content -->
                <div id="questionContent" class="hidden">
                    <!-- SMS Question -->
                    <div id="smsQuestion" class="hidden">
                        <div class="text-center mb-6">
                            <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl mb-4">
                                <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-white mb-2">ุฑุณุงูุฉ ูุตูุฉ</h2>
                            <p class="text-blue-200">ูู ูุฐู ุงูุฑุณุงูุฉ ุขููุฉ ุฃู ูุญุงููุฉ ุงุญุชูุงูุ</p>
                        </div>
                        <div class="bg-white/5 rounded-xl p-6 mb-8 border border-white/10">
                            <div class="flex items-start gap-4">
                                <div class="w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center">
                                    <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                                <div class="flex-1">
                                    <div class="bg-white/10 rounded-lg p-4 mb-2">
                                        <p class="text-white text-right leading-relaxed" id="smsContent"></p>
                                    </div>
                                    <div class="flex items-center gap-2 text-sm text-white/60">
                                        <span id="smsSender"></span>
                                        <span>โข</span>
                                        <span id="smsTimestamp"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Dialogue Question -->
                    <div id="dialogueQuestion" class="hidden">
                        <div class="text-center mb-6">
                            <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-2xl mb-4">
                                <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-white mb-2">ูุญุงุฏุซุฉ</h2>
                            <p class="text-blue-200">ุญุฏุฏ ุงูุฑุณุงุฆู ุงูุชู ุชุญุชูู ุนูู ูุญุงููุงุช ุงุญุชูุงู</p>
                        </div>
                        <div class="bg-white/5 rounded-xl p-6 mb-8 border border-white/10 max-h-96 overflow-y-auto">
                            <div class="space-y-4" id="dialogueMessages">
                                <!-- Dialogue messages with checkboxes will be populated here -->
                            </div>
                        </div>
                    </div>

                    <!-- Image Question -->
                    <div id="imageQuestion" class="hidden">
                        <div class="text-center mb-6">
                            <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-orange-500 to-red-600 rounded-2xl mb-4">
                                <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"/>
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-white mb-2">ุตูุฑุฉ ูุดุจููุฉ</h2>
                            <p class="text-blue-200">ูู ูุฐู ุงูุตูุฑุฉ ุชุญุชูู ุนูู ูุญุงููุฉ ุงุญุชูุงูุ</p>
                        </div>
                        <div class="bg-white/5 rounded-xl p-6 mb-8 border border-white/10">
                            <div class="aspect-video w-full bg-gray-800 rounded-lg overflow-hidden mb-4">
                                <img id="questionImage" src="" alt="ุตูุฑุฉ ุงูุณุคุงู" class="w-full h-full object-cover" onerror="this.src='https://images.unsplash.com/photo-1584824486509-112e4181ff6b?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                            </div>
                            <p class="text-white text-center" id="imageDescription"></p>
                        </div>
                    </div>

                    <!-- Answer Buttons -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-8">
                        <button id="safeBtn" class="answer-btn safe-btn bg-green-500/20 hover:bg-green-500/30 border-2 border-green-500/50 hover:border-green-500 text-white py-4 px-6 rounded-xl font-medium transition-all duration-200 min-touch-target" data-answer="safe">
                            <div class="flex items-center justify-center gap-3">
                                <svg class="w-6 h-6 text-green-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                                </svg>
                                <span class="text-lg">ุขููุฉ</span>
                            </div>
                        </button>
                        <button id="phishingBtn" class="answer-btn phishing-btn bg-red-500/20 hover:bg-red-500/30 border-2 border-red-500/50 hover:border-red-500 text-white py-4 px-6 rounded-xl font-medium transition-all duration-200 min-touch-target" data-answer="phishing">
                            <div class="flex items-center justify-center gap-3">
                                <svg class="w-6 h-6 text-red-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                                </svg>
                                <span class="text-lg">ุงุญุชูุงู</span>
                            </div>
                        </button>
                    </div>

                    <!-- Submit Dialogue Button -->
                    <button id="submitDialogueBtn" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 px-6 rounded-xl font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200 min-touch-target hidden mt-4">
                        ุชุฃููุฏ ุงูุฅุฌุงุจุงุช
                    </button>
                </div>

                <!-- Waiting for Players (Hidden in single-player mode) -->
                <div id="waitingState" class="text-center py-12 hidden">
                    <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-yellow-500 to-orange-600 rounded-full flex items-center justify-center">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-2">ุจุงูุชุธุงุฑ ุงููุงุนุจูู...</h3>
                    <p class="text-blue-200" id="waitingText">ุฌุงุฑู ุงูุชุธุงุฑ ุจุงูู ุงููุงุนุจูู ููุฅุฌุงุจุฉ</p>
                </div>

                <!-- Results Display (Hidden in single-player mode) -->
                <div id="resultsState" class="text-center py-8 hidden">
                    <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-green-500 to-blue-600 rounded-full flex items-center justify-center">
                        <span class="text-white text-2xl" id="resultIcon">โ</span>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-2" id="resultTitle">ุฅุฌุงุจุฉ ุตุญูุญุฉ!</h3>
                    <p class="text-blue-200 mb-4" id="resultMessage">ููุฏ ุชุนุฑูุช ุจูุฌุงุญ ุนูู ูุญุงููุฉ ุงูุงุญุชูุงู.</p>
                    <div class="bg-white/5 rounded-xl p-4 mb-4">
                        <p class="text-white text-sm" id="resultExplanation"></p>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-center">
                        <div>
                            <div class="text-2xl font-bold text-blue-400" id="pointsEarned">+50</div>
                            <div class="text-sm text-blue-200">ุงูููุงุท</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-green-400" id="playersCorrect">3/5</div>
                            <div class="text-sm text-blue-200">ุฃุฌุงุจูุง ุตุญ</div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Game Over Modal -->
    <div id="gameOverModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 hidden z-50">
        <div class="bg-white rounded-2xl p-8 max-w-2xl w-full">
            <div class="text-center">
                <div class="w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-white text-3xl">๐</span>
                </div>
                <h3 class="text-2xl font-bold text-gray-900 mb-2">ุงูุชูุช ุงูุฌููุฉ!</h3>
                <p class="text-gray-600 mb-6">ุชูุงูููุง! ููุฏ ุฃูููุช ุฌูุณุฉ ุงูุชุฏุฑูุจ ุงูุฌูุงุนู</p>
                
                <div class="bg-gray-50 rounded-xl p-6 mb-6">
                    <h4 class="font-semibold text-gray-900 mb-4">ุงููุชุงุฆุฌ ุงูููุงุฆูุฉ</h4>
                    <div class="space-y-4" id="finalScores">
                        <!-- Final scores will be populated here -->
                    </div>
                </div>

                <div class="space-y-3">
                    <button id="playAgainBtn" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-3 px-6 rounded-lg font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200">
                        ูุนุจ ูุฑุฉ ุฃุฎุฑู
                    </button>
                    <button id="closeModalBtn" class="w-full bg-gray-100 text-gray-700 py-3 px-6 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200">
                        ุงูุนูุฏุฉ ูููุญุฉ ุงูุชุญูู
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50">
        <div class="text-center">
            <div class="w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center animate-spin">
                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 2v4m0 12v4m8-10h-4M6 12H2m16.364-6.364l-2.828 2.828M7.464 17.536l-2.828 2.828m11.314 0l-2.828-2.828M7.464 6.464L4.636 3.636"/>
                </svg>
            </div>
            <h3 class="text-xl font-bold text-white mb-2">ุฌุงุฑู ุชุญููู ุงูุบุฑูุฉ...</h3>
            <p class="text-blue-200">ูุฑุฌู ุงูุงูุชุธุงุฑ</p>
        </div>
    </div>

    <script>
        console.log("Room page loaded");
        console.log("URL parameters:", new URLSearchParams(window.location.search).toString());
    </script>
    
    <!-- Load Firebase first -->
    <script type="module" src="firebase-init.js"></script>
    <!-- Then load your room game script -->
    <script type="module" src="room-game.js"></script>
</body>
</html>